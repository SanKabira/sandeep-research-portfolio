{% comment %}
Spline Scene Component - Optimized
Usage: {% include components/spline-scene.html id="scene-id" url="..." fallback="/path/to/img.jpg" %}
{% endcomment %}

<div class="spline-wrapper"
    style="height: {{ include.height | default: '400px' }}; width: 100%; position: relative; margin: 2rem 0;"
    data-spline-id="{{ include.id }}" data-spline-url="{{ include.url }}">

    <!-- 1. Loading State -->
    <div class="spline-placeholder" style="
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
    display: flex; align-items: center; justify-content: center;
    background: rgba(20, 20, 20, 0.05); border-radius: 12px;
    z-index: 2; transition: opacity 0.5s ease;">
        <div class="loading-spinner" style="text-align: center;">
            <div style="margin-bottom: 10px; font-size: 0.9rem; color: #666;">
                {{ include.caption | default: "Loading Visual..." }}
            </div>
            <div class="spinner-ring"></div>
        </div>
    </div>

    <!-- 2. Fallback Image (Hidden initially) -->
    {% if include.fallback %}
    <img class="spline-fallback" src="{{ include.fallback }}" alt="Scene Fallback" style="
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    object-fit: cover; border-radius: 12px; opacity: 0; z-index: 1;
    transition: opacity 0.5s ease; pointer-events: none;" />
    {% endif %}

    <!-- 3. Spline Viewer -->
    <spline-viewer loading="lazy" url="{{ include.url }}"
        style="width: 100%; height: 100%; opacity: 0; position: relative; z-index: 3; transition: opacity 1s ease;">
    </spline-viewer>

</div>